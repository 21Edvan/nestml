neuron iaf_psc_delta_nestml:

  state:
    V mV
    G, G_in, G_ex real
    alias V_m mV = V + E_L # Membrane potential.
  end

  equations:
    G = delta(t, tau_syn)
    V' = -1/tau_m * V + 1/C_m * (I_sum(G, in_spikes) + I_e + currents)
  end

  parameter:
    tau_m     ms = 10    # Membrane time constant.
    C_m     pF = 250     # Capacity of the membrane
    t_ref   ms = 2       # Refractory period.
    tau_syn ms = 2       # Time constant of synaptic current.
    E_L     mV = -70     # Resting potential.
    I_e     pA = 0       # External current.
    alias V_reset mV = -70 - E_L
    alias Theta   mV = -55 - E_L
    V_min = -inf
  end

  internal:
    r  integer
    RefractoryCounts integer = steps(t_ref)
  end

  input:
    ex_spikes   <- excitatory spike
    in_spikes   <- inhibitory spike
    currents    <- current
  end

  output: spike

  update:
    if r == 0: # not refractory
        integrate(V)
    else:
        r = r - 1
    end

    if V >= Theta: # threshold crossing
        r = RefractoryCounts
        V = V_reset
        emit_spike()
    end

  end

end